local M = {}

function get_os()
	local os_info = ""

	-- Check if lsb_release command exists
	local lsb_release_exists = os.execute("lsb_release -h > /dev/null 2>&1")
	if lsb_release_exists == 0 then
		os_info = io.popen("lsb_release -d"):read("*a")
		os_info = string.match(os_info, "Description:%s+(.*)")
	else
		-- Check if /etc/os-release file exists
		local os_release_path = "/etc/os-release"
		local file = io.open(os_release_path, "r")
		if file then
			for line in file:lines() do
				local key, value = line:match("^([^=]+)=(.+)$")
				if key == "PRETTY_NAME" then
					os_info = value
					break
				end
			end
			file:close()
		end
	end

	os_info = string.sub(os_info .. string.rep(" ", 12), 1, 12)
	os_info = string.gsub(os_info, "\n", "")

	return os_info
end

M.opts = function()
	-- vim.api.nvim_set_hl(0, "NeovimDashboardLogo1", { fg = blue })
	-- vim.api.nvim_set_hl(0, "NeovimDashboardLogo2", { fg = green, bg = blue })
	-- vim.api.nvim_set_hl(0, "NeovimDashboardLogo3", { fg = green })
	local dashboard = require("alpha.themes.dashboard")
	local logo = [[
 ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮  ╭───────╮ ╭─────────╮ ╭───────╮  ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮
 │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │  │       │ │         │ │       │  │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │
 │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │  │       │ │         │ │       │  │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │
 │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │  │       │ │         │ │       │  │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │
 │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │  │       │ │         │ │       │  │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │
 │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │  │       ╰─╯         ╰─╯       │  │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │
 │                             │   │                             │   │                             │   │                             │  │                             │  │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │
 │                             │   │                             │   │                             │   │                             │  │                             │  │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │
 │                     ⠀⠀⠀⠀⠀⠀⠀⠀│⠀  │                     ⠀⠀⠀⠀⠀⠀⠀⠀│⠀⠀⠀│⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣀⣤⣤⣀⣀⡀⠀⠀  │⠀⠀⠀│                             │  │                             │  │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │
 ╰─────────────────────────────╯   ╰─────────────────────────────╯  ⠀╰──────────⠀⠀⢀⣠⠴⣖⣫⣭⡽⠾⢵⣭⡽⠯⢭⣽⣖⣲⠤⣀⡀⠀⠀╰─────────────────────────────╯  ╰─────────────────────────────╯  ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯
 ╭───────╮ ╭─────────╮ ╭───────╮⠀  ╭───────╮ ╭─────────╮ ╭───────╮⠀⠀⠀⠀╭───────╮ ⣠⢖⣫⢖⣫⣽⣶⣾⣿⣿⣿⣿⣿⣿⣿⣷⣯⣝⡻⣷⣭⡲⣤⡀───────╮ ╭─────────╮ ╭───────╮  ╭───────╮ ╭─────────╮ ╭───────╮  ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮
 │       │ │         │ │       │⠀  │       │ │         │ │       │⠀⠀⠀⠀│      ⢀⣴⢟⡵⣫⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣶⣝⢿⣯⡻⣦⡀     │ │         │ │       │  │       │ │         │ │       │  │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │
 │       │ │         │ │       │⠀  │       │ │         │ │       │⠀⠀⠀⠀│    ⢀⣴⡿⣣⢯⣾⣿⣿⣿⣿⣿⣿⢿⣿⣿⣷⣿⣷⣿⣿⣿⣿⣿⣿⣿⣿⣷⡻⣿⡝⣷⡄    │ │         │ │       │  │       │ │         │ │       │  │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │
 │       │ │         │ │       │⠀  │       │ │         │ │       │⠀⠀⠀⠀│   ⢠⣾⡿⣵⢳⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡜⣿⡽⣿⡄   │ │         │ │       │  │       │ │         │ │       │  │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │
 │       │ │         │ │       │⠀  │       │ │         │ │       │⠀⠀⠀⠀│  ⢀⣿⣿⢳⣟⣿⣿⣿⣿⣿⢏⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣯⢻⣿⣿⣿⣿⡼⣧⢿⣷⠘⡄ │ │         │ │       │  │       │ │         │ │       │  │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │
 │       ╰─╯         ╰─╯       │⠀  │       ╰─╯         ╰─╯       │⠀⠀⠀⠀│⠀⠀⣼⣿⡏⣿⢸⣿⣿⣿⣿⣿⢺⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣯⣿⣿⣿⣿⣷⢿⣺⣿⡆⣷ ╰─╯         ╰─╯       │  │       ╰─╯         ╰─╯       │  │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │
 │                             │⠀  │                             │⠀⠀⠀⠀│⠀⠀⣿⣿⣷⣿⢸⣿⣿⣿⣿⣿⡸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⢽⣿⣿⣿⣿⢸⡯⣿⡇⣿⡆                      │  │                             │  │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │
 │                             │⠀  │                             │⠀⠀⠀⠀│⠀⠃⢻⣿⣾⣿⡾⣿⣿⣿⣿⣿⣷⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣟⣾⣿⣿⣿⣿⢸⣷⣿⠇⣿⡇                      │  │                             │  │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │
 │                             │⠀  │waylonwalker.com             │⠀⠀⠀⠀│⠀⠐⡘⣿⡇⣿⣷⣻⣿⣿⣿⣿⣿⣿⣯⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡟⣿⣸⡿⢰⣿⠇                      │  │                             │  │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │
 ╰─────────────────────────────╯⠀  ╰─────────────────────────────╯⠀⠀⠀⠀╰──⠱⡘⢿⣹⣿⣯⣻⣿⣿⣿⣿⣿⣿⣿⣿⣷⣿⣯⣿⣿⣯⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⣹⣳⡿⢡⣿⡿───────────────────────╯  ╰─────────────────────────────╯  ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯
 ╭───────╮ ╭─────────╮ ╭───────╮⠀  ╭───────╮ ╭─────────╮ ╭───────╮⠀⠀⠀╭────⠐⢌⠳⡻⣿⣷⡽⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⢿⣽⣵⡟⢡⣿⣿⠃╮ ╭──────────╮ ╭───────╮  ╭───────╮ ╭─────────╮ ╭───────╮  ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮
 │       │ │         │ │       │⠀  │  ⣿    │ │         │ │       │⠀⠀⠀│      ⠑⢌⠻⢿⣿⣯⣿⢿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⣻⢗⣿⡿⢋⣴⣿⡿⠁ │ │          │ │       │  │       │ │         │ │       │  │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │
 │       │ │         │ │       │⠀  │       │ │         │ │ ⣿     │⠀⠀⠀│       │⠑⠤⡈⠛⠿⣷⣯⣟⡿⢿⣿⣿⣿⣿⣿⣿⣿⢿⣟⠯⣗⣯⡾⠟⣉⣴⣿⡿⠟   │ │          │ │       │  │       │ │         │ │       │  │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │
 │       │ │         │ │       │⠀  │   ⣿⣿  │ │         │ │       │⠀⠀⠀│       │ ⠀⢈⣾⣶⣤⣜⡉⠽⠿⢷⣖⣺⣿⣶⣤⠽⠷⠞⠛⣋⣅⣶⣿⡿⠟⠋     │ │          │ │       │  │       │ │         │ │       │  │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │
 │       │ │         │ │       │⠀  │       │ │  ⣿⣿⣿    │ │       │⠀⠀⠀│       │ ⣠⣿⣿⣿⣿⣿⣟⣿⣿⣶⣶⣶⣶⣶⣶⣶⣶⣇⠸⣿⣿⣎⠁│       │ │          │ │       │  │       │ │         │ │       │  │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │
 │       ╰─╯         ╰─╯       │⠀  │       ╰─╯         ╰─╯       │⠀⠀⠀│       ╰⣴⣿⣿⣿⣿⣿⡿⣽⣿⣿⣿⣿⣿⣿⣿⣿⣿⡁⣿⡄⢻⣿⣿⣆│       ╰─╯          ╰─╯       │  │       ╰─╯         ╰─╯       │  │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │
 │ pipx run waylonwalker       │⠀  │  ⣿ ⣿⣿⣿⣿                     │⠀⠀⠀│  ⠀⠀⠀⠀⢀⣾⣿⣿⣿⣿⣿⡿⡹⣿⣿⣿⣿⣿⣿⣿⣿⣿⣧⣡⣿⣷⠈⣿⣿⣿⣆                              │  │                             │  │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │
 │                             │⠀  │      ⣿⣿⣿                    │⠀⠀⠀│ ⠀⠀⠀⠀⣠⣾⣿⣿⣿⣿⣿⣟⣾⣷⣭⣻⣿⣿⣿⣿⣿⠟⣕⣕⣾⣿⣿⡆⠈⢻⣿⣿⣆                             │  │                             │  │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │
 │                             │⠀  │                    ⣿⣿⣿      │⠀⠀⠀│ ⠀⠀⠀⣰⣿⣿⣿⣿⣿⣿⠏⢾⣿⣿⣿⣷⣭⢾⣛⣣⣾⡽⣫⣾⣿⣿⣿⠋⠀⠀⠈⠻⢿⣆@_waylonwalker              │  │                             │  │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │
 ╰─────────────────────────────╯⠀  ╰─────────────────────────────╯⠀⠀⠀╰───⣰⡿⠟⢛⡛⠛⠋⠁⠀⠀⠻⣿⣿⣿⣿⣿⣾⣿⣷⣿⣿⣿⣿⡟⠉⠀⠀⠀⣀⠀⠀⠙⠂───────────────────────────╯  ╰─────────────────────────────╯  ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯
 ╭───────╮ ╭─────────╮ ╭───────╮⠀  ╭───────╮ ╭─────────╮ ╭───────╮⠀⠀⠀╭──⢰⡟⢀⣿⡿⠀⢀╭────⡌⠙⠛⠿⠿⣿⣿⠿⠿⠛⠉─⢳──╮⠘⣿⠸⣾⡄⢄─────╮ ╭─────────╮ ╭───────╮  ╭───────╮ ╭─────────╮ ╭───────╮  ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮   ╭───────╮ ╭─────────╮ ╭───────╮
 │       │ │         │ │       │⠀  │       │ │         │ │       │⠀⠀⠀│  ⠀⠀⡾⢟⣵⡏⣿⠁⠀⠀⠀⠀⠁⠀⠀⠈⠁⠀│ │⠀⠀⠀⠈ ⠀│⠀⢸⡇⢻⡟⠀⠀⠀   │ │         │ │       │  │       │ │         │ │       │  │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │
 │       │ │         │ │       │⠀  │       │ │         │ │       │⠀⠀⠀│ ⠀⠀⠀⠀⢸⡿⠀⡟│⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀│ │⠀⠀⠀⠀⠀⠀│⠀⠀⠁⠐⠁⠀⠀⠀   │ │         │ │       │  │       │ │         │ │       │  │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │
 │       │ │         │ │       │⠀  │       │ │         │ │       │⠀⠀⠀│ ⠀⠀⠀⠀⠈⠁⠀⠁│⠀⠀⠀⠀⣠⣶⠀⠀⠀⠀│ │⠀⢰⣦⡀⠀⠀│⠀⠀⠀│⠀⠀⠀⠀   │ │         │ │       │  │       │ │         │ │       │  │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │
 │       │ │         │ │       │⠀  │       │ │         │ │       │⠀⠀⠀│       │ │⠀⠀⠀⢠⢿⠟⠀⠀⠀⠀│ │⠀⠘⣿⢇⠀⠀│⠀⠀⠀│⠀⠀⠀⠀   │ │         │ │       │  │       │ │         │ │       │  │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │   │       │ │         │ │       │
 │       ╰─╯         ╰─╯       │⠀  │       ╰─╯         ╰─╯       │⠀⠀⠀│       ╰─╯⠀⠀⢠⡿⠉⠀⠀⠀⠀⠀╰─╯⠀⠀⠀⣿⠀⠀│⠀⠀⠀│⠀⠀⠀⠀   ╰─╯         ╰─╯       │  │       ╰─╯         ╰─╯       │  │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │   │       ╰─╯         ╰─╯       │
 │                             │⠀  │                             │⠀⠀⠀│ ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣸⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⠀⠀│⠀⠀⠀│⠀⠀⠀⠀⠀⠀⠀⠀     ⠀⠀⠀⠀            │  │                             │  │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │
 │                             │⠀  │                             │⠀⠀⠀│ ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠻⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀│⠀⠀⠀│⠀⠀⠀⠀⠀⠀⠀⠀     ⠀⠀⠀⠀            │  │                             │  │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │
 │ $os_info___                 │⠀  │ $time___                    │⠀⠀⠀│ ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⠖⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠒⢄⠀ │   │                             │  │                             │  │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │   │                             │
 ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯  ╰─────────────────────────────╯  ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯   ╰─────────────────────────────╯
]]

	local current_time = os.date("%I:%M %p")
	local replaced_logo = string.gsub(logo, "$time___", current_time)
	local replaced_logo = string.gsub(replaced_logo, "$os_info___", get_os)
	dashboard.section.header.val = vim.split(replaced_logo, "\n")
	-- stylua: ignore
	dashboard.section.buttons.val = {
		dashboard.button("p", " " .. " Find file", "<cmd> Telescope find_files <cr>"),
		dashboard.button("n", " " .. " New file", "<cmd> ene <BAR> startinsert <cr>"),
		-- dashboard.button("r", " " .. " Recent files", "<cmd> Telescope oldfiles <cr>"),
		-- dashboard.button("f", " " .. " Find text", "<cmd> Telescope live_grep <cr>"),
		-- dashboard.button("q", " " .. " Quit", "<cmd> qa <cr>"),
	}
	-- for _, button in ipairs(dashboard.section.buttons.val) do
	--     button.opts.hl = "AlphaButtons"
	--     button.opts.hl_shortcut = "AlphaShortcut"
	-- end
	--
	-- dashboard.section.header.opts.hl = "AlphaHeader"
	-- dashboard.section.buttons.opts.hl = "AlphaButtons"
	-- dashboard.section.footer.opts.hl = "AlphaFooter"
	-- dashboard.opts.layout[1].val = 8

	dashboard.section.header.opts.hl = {
		{ { "NeovimDashboardLogo1", 6, 8 }, { "NeovimDashboardLogo3", 9, 22 } },
		{ { "NeovimDashboardLogo1", 6, 8 }, { "NeovimDashboardLogo2", 9, 11 }, { "NeovimDashboardLogo3", 12, 24 } },
		{ { "NeovimDashboardLogo1", 6, 11 }, { "NeovimDashboardLogo3", 12, 26 } },
		{ { "NeovimDashboardLogo1", 6, 11 }, { "NeovimDashboardLogo3", 12, 24 } },
		{ { "NeovimDashboardLogo1", 6, 11 }, { "NeovimDashboardLogo3", 12, 22 } },
	}
	return dashboard
end

M.config = function(_, dashboard)
	-- close Lazy and re-open when the dashboard is ready
	if vim.o.filetype == "lazy" then
		vim.cmd.close()
		vim.api.nvim_create_autocmd("User", {
			once = true,
			pattern = "AlphaReady",
			callback = function()
				require("lazy").show()
			end,
		})
	end

	require("alpha").setup(dashboard.opts)

	vim.api.nvim_create_autocmd("User", {
		once = true,
		pattern = "LazyVimStarted",
		callback = function()
			local stats = require("lazy").stats()
			local ms = (math.floor(stats.startuptime * 100 + 0.5) / 100)
			dashboard.section.footer.val = "⚡ Neovim loaded "
				.. stats.loaded
				.. "/"
				.. stats.count
				.. " plugins in "
				.. ms
				.. "ms"
			pcall(vim.cmd.AlphaRedraw)
		end,
	})
end

return M
